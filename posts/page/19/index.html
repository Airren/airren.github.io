<!doctype html><html><head><title>Posts</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link rel=stylesheet href=/google-fonts/Mulish/mulish.css><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=icon type=image/png href=/images/site/favicon_hufa9bb061875e5783d83b75135c052e0b_6105_42x0_resize_box_3.png><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://airren.github.io/posts/"><link rel=stylesheet href=/css/layouts/list.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/main-logo_hue3dcebd3233f4247380b642debb20e00_8242_42x0_resize_box_3.png alt=Logo>
ByteGopher</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=languageSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="flag-icon flag-icon-gb"></span>
English</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/cn/posts><span class="flag-icon flag-icon-cn"></span>
ä¸­æ–‡</a></div></li></ul></div></div><img src=/images/site/main-logo_hue3dcebd3233f4247380b642debb20e00_8242_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_hu625a7b1b3d293b5088d5bed0b0ae5735_6060_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/blog/ title=Blog>Blog</a></li><li><a href=/posts/cloudnative/ title=CloudNative>CloudNative</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/component/>Infrastructure</a><ul><li><a href=/posts/component/TimeSeries/ title=TimeSeriesDB>TimeSeriesDB</a></li></ul></li><li><a href=/posts/kubernetes/ title=Kubernetes>Kubernetes</a></li><li><a href=/posts/note_c/ title="Note C">Note C</a></li><li><a href=/posts/note_go/ title="Note Go">Note Go</a></li><li><a href=/posts/react/ title=React>React</a></li><li><a href=/posts/sdewan/ title=SDEWAN>SDEWAN</a></li><li><a href=/posts/tips/ title=Tips>Tips</a></li><li><a href=/posts/nodus/ title=Nodus>Nodus</a></li><li><a href=/posts/interview/ title=Interview>Interview</a></li><li><a href=/posts/life/ title=Life>Life</a></li><li><a href=/posts/linux/ title=Linux>Linux</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class="content container-fluid" id=content><div class="container-fluid post-card-holder" id=post-card-holder><div class=post-card><a href=/posts/note_go/0_go_compile/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>Go compile</h5><p class="card-text post-summary">n
https://zhuanlan.zhihu.com/p/343562661
https://draveness.me/golang/docs/part3-runtime/ch06-concurrency/golang-sysmon/</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/note_go/0_go_compile/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/note_go/1_SettingUpGoEnv/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>Go è®¾ç½®Golangå¼€å‘ç¯å¢ƒ</h5><p class="card-text post-summary">å®‰è£…Go å¼€å§‹å†™Golangä¹‹å‰ï¼Œä½ é¦–å…ˆéœ€è¦ä¸‹è½½å¹¶ä¸”å®‰è£…Golangå¼€å‘å·¥å…·ã€‚å¯ä»¥åœ¨Golangçš„å®˜æ–¹ç½‘ç«™ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…ã€‚æ ¹æ®ä½ çš„å¼€å‘å¹³å°é€‰æ‹©ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ã€‚å¯¹äºMacç”¨æˆ·(æˆ–è€…Windowsç”¨æˆ·)æ¥è¯´.pkg(æˆ–msi)å®‰è£…åŒ…ä¼šè‡ªåŠ¨æŠŠGolangå®‰è£…åˆ°åˆé€‚çš„ä½ç½®ï¼Œå¹¶å°†å‘½ä»¤åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ï¼Œå¹¶ä¸”è‡ªåŠ¨ç§»é™¤è€ç‰ˆæœ¬ã€‚å¦‚æœä½¿ç”¨Macæ›´åŠ æ¨èç›´æ¥ä½¿ç”¨brew install goï¼Œ ä½¿ç”¨brew å¯ä»¥æ–¹ä¾¿çš„ç®¡ç†Goå¤šä¸ªç‰ˆæœ¬ã€‚
å¯¹äºLinuxæˆ–è€…FreeBSDç”¨æˆ·å¯ä»¥ç›´æ¥ä¸‹è½½å¯¹åº”çš„.tar.gz, å¹¶è§£å‹åˆ°æ–‡ä»¶åä¸ºgoçš„ç›®å½•ä¸­ã€‚æŠŠè¿™ä¸ªæ–‡ä»¶Copyåˆ°/usr/local/ä¸‹ã€‚ç„¶åæŠŠ/usr/local/go/binæ·»åŠ åˆ°$PATHä¸­ã€‚
1tar -C /usr/local -xzvf go1.17.3.linux-amd64.tar.gz 2# change .profile to .bashrc or.zsh depend on you evnironment 3echo "export PATH=$PATH:/usr/local/go/bin" >>$HOME/.profile Go ç¨‹åºç¼–è¯‘å®Œæˆåæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸éœ€è¦ä¾èµ–ä»»ä½•è¿è¡Œè½¯ä»¶(ä¾‹å¦‚ï¼ŒPythonéœ€è¦Pythonè§£é‡Šå™¨ï¼ŒJavaéœ€è¦JVM)ã€‚ä»…åœ¨éœ€è¦ç¼–è¯‘Goä»£ç çš„ç¯å¢ƒä¸Šå®‰è£…Goå³å¯ã€‚
å®‰è£…å®Œæˆåï¼Œæ‰“å¼€Terminal(Window æ‰“å¼€CMD)ï¼ŒéªŒè¯Goæ˜¯å¦å®‰è£…æˆåŠŸã€‚
1go version åœ¨æ‰€æœ‰çš„é…ç½®éƒ½æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºçš„ç‰ˆæœ¬ä¿¡æ¯
1# mac intel cpu 64bit 2go version go1.17.3 darwin/amd64 ä»ä¸Šè¿°ä¿¡æ¯ä¸­å¯ä»¥çœ‹å‡ºï¼ŒGoçš„ç‰ˆæœ¬æ˜¯1.17.3,ä½¿ç”¨çš„å¼€å‘æœºå™¨æ˜¯ Mac(Darwin æ˜¯MacOSçš„Kernel Name, amd64 æ˜¯æŒ‡64-bitçš„x86 CPUæ¶æ„)ã€‚
å¦‚æœä½ æ²¡æœ‰å¾—åˆ°æ­£ç¡®çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯ä½ æ²¡æœ‰æŠŠgoåŠ å…¥åˆ°ç¯å¢ƒå˜é‡ï¼Œæˆ–è€…æœ‰å…¶ä»–çš„ç¨‹åºåç§°ä¹Ÿä¸ºgoã€‚å¯¹äºMacæˆ–è€…Unix-likeç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨which goæŸ¥çœ‹å½“å‰ç¯å¢ƒä¸‹çš„goçš„æ˜¯å¦æ­£ç¡®å…³è”åˆ°/usr/local/go/binã€‚å¦‚æœè·¯å¾„æ­£ç¡®ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸‹è½½é”™äº†å®‰è£…åŒ…ï¼Œæ£€æŸ¥ä¸‹å®‰è£…åŒ…çš„ä½æ•°æ˜¯å¦ä¸å½“å‰æ“ä½œç³»ç»ŸåŒ¹é…ï¼Œæœ‰å¯èƒ½åœ¨64-bitçš„ç³»ç»Ÿä¸Šä¸‹è½½äº†32-bitçš„å®‰è£…åŒ…ã€‚å¦å¤–ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯èŠ¯ç‰‡æ¶æ„é€‰é”™äº†ã€‚
Go å·¥ä½œç©ºé—´ ä»2009å¹´Goå¼€å§‹ä½¿ç”¨ï¼Œåœ¨å¼€å‘è€…å¦‚æœç»„ç»‡ä»£ç å’Œç®¡ç†ä¾èµ–ä¸Šç»å†äº†å‡ æ¬¡å˜åŒ–ã€‚åœ¨Go 1.11æ‰€æœ‰çš„ä»£ç å¿…é¡»ä¿å­˜åœ¨GOPATHä¹‹ä¸‹ï¼Œä¹‹åçš„ç‰ˆæœ¬ç”¨æˆ·å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹å­˜å‚¨è‡ªå·±çš„ä»£ç ã€‚ä½†æ˜¯Goä¾ç„¶å¸Œæœ›æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œç©ºé—´å¯ä»¥å­˜å‚¨é€šè¿‡go installå®‰è£…é¢ç¬¬ä¸‰æ–¹åŒ…ã€‚é»˜è®¤çš„å·¥ä½œç©ºé—´æ˜¯$HOME/go, ä¸‹è½½çš„ç¬¬ä¸‰æ–¹åŒ…é»˜è®¤å­˜å‚¨åœ¨$HOME/go/src,ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶å­˜å‚¨åœ¨$HOME/go/binã€‚ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªé»˜è®¤çš„å·¥ä½œç©ºé—´ï¼Œæˆ–è€…é€šè¿‡è®¾ç½®$GOPAHTæŒ‡å®šä¸€ä¸ªå·¥ä½œç©ºé—´ã€‚
æ— è®ºä½ æ˜¯å¦ä½¿ç”¨é»˜è®¤çš„wokespaceï¼Œå»ºè®®ä½ æŠŠ$GOPATH/binåŠ å…¥åˆ°$PATHä¸­ã€‚ é€šè¿‡æŒ‡å®š$GOPATHå¯ä»¥æ¸…æ¥šåœ°æè¿°å½“å‰ç¯å¢ƒçš„Goå·¥ä½œç©ºé—´ï¼ŒæŠŠ$GOPATH/binåŠ å…¥åˆ°å¯æ‰§è¡Œè·¯å¾„ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨go install å®‰è£…çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚
å¦‚æœæ˜¯Unix-likeçš„å¼€å‘ç¯å¢ƒå¯ä»¥æŠŠä¸‹é¢å‡ è¡ŒåŠ å…¥åˆ°$HOME/.profileä¸­ã€‚
1# if use ubuntu you should add to .</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/note_go/1_SettingUpGoEnv/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/blog/project_go/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>How to Create a go project for Cloud Native</h5><p class="card-text post-summary">Dockerfile Use Makefile to compiling and buid docker images</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/blog/project_go/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/blog/intel_spx_AMX/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>Intel AMXAV</h5><p class="card-text post-summary">Introduce SIMD å•æŒ‡ä»¤æ•°æ®-> VNNI/INT8
Intrinsics for Intel(R) Advanced Matrix Extension Instructions Intel Advanced Matrix Extension is a new 64-bit programming paradigm consisting of two components:
A set of 2-dimensional registers(tiles) representing sub-arrays from a larger 2-dimensional memory image Am accelerator that is able to operate on tiles; the first implementation of this accelerator is called TMUL(tile matrix multiply unit) Intrinsic for Intel Advanced Matrix Extension AMX-BF16 Instructions This intrinsic supports tile computational operations on bfloat16 number.</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/blog/intel_spx_AMX/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/linux/network_ipsec/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>IPSec</h5><p class="card-text post-summary">IPsec is a group of networking protocols used for setting up secure encrypted connections, such VPNs, across publicly shared networks.
What is IPsec IPsec is a group of protocols that are used together to set up encrypted connections between devices. It helps keep data send over public networks secure. IPsec is often used to set up VPNs, and it works by encrypting IP packets, along with authenticating the source where the packets come from.</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/linux/network_ipsec/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/linux/network_iptables/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>iptables</h5><p class="card-text post-summary">é˜²ç«å¢™ é€»è¾‘ä¸Šï¼Œé˜²ç«å¢™å¯ä»¥åˆ†ä¸ºä¸»æœºé˜²ç«å¢™å’Œç½‘ç»œé˜²ç«å¢™ã€‚ä¸»æœºé˜²ç«å¢™é’ˆå¯¹å•ä¸ªä¸»æœºè¿›è¡Œé˜²æŠ¤ï¼›ç½‘ç»œé˜²ç«å¢™å¾€å¾€å¤„äºç½‘ç»œå…¥å£æˆ–è€…è¾¹ç¼˜ï¼Œé’ˆå¯¹ç½‘ç»œå…¥å£è¿›è¡Œé˜²æŠ¤ï¼ŒæœåŠ¡äºé˜²ç«å¢™èƒŒåçš„æœ¬åœ°å±€åŸŸç½‘ã€‚
ç‰©ç†ä¸Šï¼Œé˜²ç«å¢™å¯ä»¥åˆ†ä¸ºç¡¬ä»¶é˜²ç«å¢™å’Œè½¯ä»¶é˜²ç«å¢™ã€‚ç¡¬ä»¶é˜²ç«å¢™åœ¨ç¡¬ä»¶çº§åˆ«å®ç°éƒ¨åˆ†é˜²ç«å¢™åŠŸèƒ½ï¼Œå¦ä¸€éƒ¨åˆ†åŸºäºè½¯ä»¶å®ç°ï¼Œæ€§èƒ½é«˜ï¼Œæˆæœ¬é«˜ï¼›è½¯ä»¶é˜²ç«å¢™åº”ç”¨è½¯ä»¶å¤„ç†é€»è¾‘è¿è¡Œäºé€šç”¨è®¡ç®—å¹³å°ä¹‹ä¸Šçš„é˜²ç«å¢™ï¼Œæ€§èƒ½ä½ï¼Œæˆæœ¬ä½ã€‚
iptables/netfilter iptableså…¶å®ä¸æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œå¯ä»¥æŠŠå®ƒç†è§£é™ˆä¼Ÿä¸€ä¸ªå®¢æˆ·ç«¯ä»£ç†ï¼Œç”¨æˆ·é€šè¿‡iptablesè¿™ä¸ªä»£ç†ï¼Œå°†ç”¨æˆ·çš„å®‰å…¨è®¾å®šæ‰§è¡Œåˆ°å¯¹åº”çš„â€œå®‰å…¨æ¡†æ¶â€ä¸­ï¼Œè¿™ä¸ªâ€œå®‰å…¨æ¡†æ¶â€æ‰æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œ è¿™ä¸ªæ¡†æ¶çš„åå­—å«netfilterã€‚
netfilteræ‰æ˜¯é˜²ç«å¢™çœŸæ­£çš„å®‰å…¨æ¡†æ¶ï¼Œä½äºå†…æ ¸ç©ºé—´ã€‚iptableså…¶å®æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œ ä½äºç”¨æˆ·ç©ºé—´ï¼Œæˆ‘ä»¬ä½¿ç”¨iptablesè¿™ä¸ªå·¥å…·æ“ä½œçœŸæ­£çš„æ¡†æ¶netfilterã€‚
netfilter/iptablesç»„æˆçš„linuxå¹³å°ä¸‹çš„åŒ…è¿‡æ»¤é˜²ç«å¢™ï¼Œæ˜¯å…è´¹çš„ï¼Œå…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š
ç½‘ç»œåœ°å€è½¬æ¢(NAT, Network Address Translate) æ•°æ®åŒ…å†…å®¹ä¿®æ”¹ æ•°æ®åŒ…è¿‡æ»¤(é˜²ç«å¢™åŠŸèƒ½) æˆ‘ä»¬è™½ç„¶å¯ä»¥ä½¿ç”¨service iptables startå¯ç”¨iptablesæœåŠ¡ï¼Œä½†å…¶å®å‡†ç¡®çš„æ¥è¯´iptableså¹¶æ²¡æœ‰ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä¸èƒ½ç®—æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æœåŠ¡ï¼Œè€Œç®—æ˜¯å†…æ ¸æä¾›çš„åŠŸèƒ½ã€‚
iptablesæ˜¯æŒ‰ç…§è§„åˆ™(rules)æ¥åŠäº‹çš„, rules å°±æ˜¯æˆ‘ä»¬é¢„å®šä¹‰çš„æ¡ä»¶ã€‚è§„åˆ™ä¸€èˆ¬å®šä¹‰ä¸ºâ€œå¦‚æœæ•°æ®åŒ…å¤´ç¬¦åˆè¿™æ ·çš„æ¡ä»¶ï¼Œå°±è¿™æ ·å¤„ç†è¿™ä¸ªæ•°æ®åŒ…â€ã€‚è§„åˆ™å­˜å‚¨åœ¨å†…æ ¸ç©ºé—´çš„ä¿¡æ¯åŒ…è¿‡æ»¤è¡¨ä¸­ã€‚è¿™äº›è§„åˆ™åˆ†åˆ«æŒ‡å®šäº†æºåœ°å€ã€ç›®çš„åœ°å€ã€ä¼ è¾“åè®®(å¦‚TCPã€UDPã€ICMP)å’ŒæœåŠ¡ç±»å‹(å¦‚HTTPã€FTPå’ŒSMTP)ç­‰ã€‚å½“æ•°æ®åŒ…ä¸è§„åˆ™åŒ¹é…æ—¶ï¼Œiptableså°±æ ¹æ®è§„åˆ™æ‰€å®šä¹‰çš„æ–¹æ³•æ¥å¤„ç†è¿™äº›æ•°æ®åŒ…ï¼Œ å¦‚æ”¾è¡Œ(accept)ã€æ‹’ç»(reject)å’Œä¸¢å¼ƒ(drop)ç­‰ã€‚é…ç½®é˜²ç«å¢™ä¸»è¦å·¥ä½œå°±æ˜¯æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤è¿™äº›è§„åˆ™ã€‚
ewctl
hubDevice Objcet true é»˜è®¤hub</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/linux/network_iptables/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/blog/4_istio_multicluster/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>Istio MultiCluster</h5><p class="card-text post-summary">Multicluster Replicated Control Plane is an uses case to enable communication between two service in difference service mesh without using Ingress and can enable mutual TLS between the service.
Istio 1.8 Upgrade Notes
Multicluster .global Stub Domain Deprecation As part of this release, Istio has switched to a new configuration for multi-primary (formerly â€œreplicated control planesâ€). The new configuration is simpler, has fewer limitations, and has been thoroughly tested in a variety of environments.</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/blog/4_istio_multicluster/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/cloudnative/Kubernates/1-k8s-cloudnative/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>K8s Cloud Native</h5><p class="card-text post-summary">Kubenetesç”Ÿäº§è½åœ°å…¨ç¨‹å®è·µ
æ ¸å¿ƒæ¦‚å¿µ
æ¶æ„è®¾è®¡
è®¤è¯æˆæƒ
é«˜å¯ç”¨é›†ç¾¤æ­å»º
äºŒè¿›åˆ¶& kubeadm
3å°masterä¸¤å°2 node
calicoã€corednsã€dashboard
ä¸šåŠ¡è¿ç§»åˆ°Kubenetes
Harbor
æœåŠ¡å‘ç°ç­–ç•¥
IngressNginx
Docker åŒ–æœåŠ¡ã€K8sã€æœåŠ¡å‘ç°
CICD
namespaceã€resourcesã€label
æœåŠ¡çš„è°ƒåº¦ä¸ç¼–æ’
å¥åº·æ£€æŸ¥
è°ƒåº¦ç­–ç•¥
éƒ¨ç½²ç­–ç•¥
æ—¥å¿—ä¸ç›‘æ§
ç¬¬2ç«  kuberneteså¿«é€Ÿå…¥é—¨ æœ¬ç« ä¸­å°†ä»æ ¸å¿ƒæ¦‚å¿µã€æ¶æ„è®¾è®¡ã€è®¤è¯æˆæƒä»¥åŠé›†ç¾¤æ­å»ºæ–¹æ¡ˆå¯¹æ¯”å‡ æ–¹é¢ï¼Œå¸¦é¢†å¤§å®¶å¿«é€ŸæŒæ¡kubernetesçš„é‡è¦çŸ¥è¯†ç‚¹ï¼ŒåŠ©åŠ›å¿«é€Ÿå…¥é—¨ã€‚
2-1 äº†è§£kubernetes èˆµæ‰‹ï¼š æ¸”ç½‘ã€æ¸”èˆ¹ docker : é²¸é±¼ï¼Œé›†è£…ç®± ğŸ³
Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
It groups containers that makeup application in to logical units for easy management and discovery.Kubernetes builds upon 15 years of experience of running production workloads at Google, combined with best-of-breed ideas and practices from the community.</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/cloudnative/Kubernates/1-k8s-cloudnative/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/cloudnative/Kubernates/9-k8s-configmap/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>K8s ConfigMap</h5><p class="card-text post-summary">ç»™Podä¼ é€’å‚æ•° é€šè¿‡ç¯å¢ƒå˜é‡ç»™Podä¼ é€’å‚æ•° å¯ä»¥åœ¨containerçš„æè¿°æ–‡ä»¶ä¸­åŠ å…¥ä¸€ä¸ªenvçš„å‚æ•°ï¼Œå€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯é”®å€¼å¯¹ï¼Œå€¼æ˜¯stringã€‚
1--- 2apiVersion: v1 3kind: Pod 4metadata: 5 name: first-pod 6 labels: 7 app: nginx 8spec: 9 containers: 10 - name: 00-simple-pod-nginx 11 image: nginx:1.17.0 12 env: 13 - name: INTERVAL 14 value: 30s é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ç»™Podä¼ é€’å‚æ•° åŠ å…¥ä¸€ä¸ªargsé…ç½®ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/cloudnative/Kubernates/9-k8s-configmap/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/cloudnative/Kubernates/7-k8s-daemonset/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>K8s DaemonSet</h5><p class="card-text post-summary">NodeExporter ç”¨äºé‡‡é›†ä¸€ä¸ªHostä¸Šçš„å„ç§æ€§èƒ½æŒ‡æ ‡ï¼Œå¹¶ä¸”æš´éœ²ç»™Prometheus é‡‡é›†ã€‚å› ä¸ºNodeExporteréœ€è¦é‡‡é›†æ¯ä¸€ä¸ªHostçš„æ•°æ®çŠ¶æ€ï¼Œæ‰€ä»¥å°±äº§ç”Ÿäº†ä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨æ¯ä¸€ä¸ªK8sçš„æœºå™¨ä¸Šéƒ½è¦è¿è¡Œä¸€ä¸ªPod, è€Œå®ç°è¿™ä¸ªéœ€æ±‚çš„K8sèµ„æºç±»å‹å°±å«åšDaemonSetã€‚
DaemonSet DaemonSetçš„åŠŸèƒ½å°±æ˜¯ä¿è¯æ¯ä¸ªNodeéƒ½è¿è¡ŒPodï¼Œ ä½†æ˜¯å¦‚æœæŸä¸ªK8sçš„Nodeä¸‹çº¿ä¹‹åï¼Œå¯¹åº”çš„Podä¹Ÿä¸‹çº¿ï¼Œè¿˜æ˜¯ä¿æŒæ¯ä¸ªNodeä¸€ä¸ªPodã€‚å¦‚æœæ–°å¢ä¸€ä¸ªNodeï¼Œå°±ä¼šåœ¨æ–°å¢çš„Nodeä¸­å¢åŠ ä¸€ä¸ªPodï¼Œä¿è¯æ‰€æœ‰çš„Nodeä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªå½“å‰Podã€‚
1--- 2apiVersion: apps/v1 3kind: DaemonSet 4metadata: 5 name: node-exporter 6 namespace: kube-system 7 labels: 8 k8s-app: node-exporter 9 kubernetes.io/cluster-service: "true" 10 addonmanager.kubernetes.io/mode: Reconcile 11 version: v1.2.2 12spec: 13 selector: 14 matchLabels: 15 k8s-app: node-exporter 16 version: v1.2.2 17 updateStrategy: 18 type: OnDelete 19 template: 20 metadata: 21 labels: 22 k8s-app: node-exporter 23 version: v1.2.2 24 spec: 25 priorityClassName: system-node-critical 26 containers: 27 - name: prometheus-node-exporter 28 image: "prom/node-exporter:v1.</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/cloudnative/Kubernates/7-k8s-daemonset/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/cloudnative/Kubernates/5-k8s-deployment/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>K8s Deployments</h5><p class="card-text post-summary">è“ç»¿éƒ¨ç½² è“ç»¿éƒ¨ç½²æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„éƒ¨ç½²æ–¹å¼ï¼Œç»å¸¸ä¼šç”¨äºæ–°æ—§ç‰ˆæœ¬ä¸å…¼å®¹çš„æƒ…å†µã€‚
å…ˆå°†æ–°ç‰ˆæœ¬(ç»¿ç‰ˆ)çš„æœåŠ¡è¿è¡Œèµ·æ¥ã€‚ å°†æ‰€æœ‰çš„æµé‡åˆ‡åˆ°æ–°ç‰ˆæœ¬çš„æœåŠ¡ä¸Š åˆ é™¤æ—§ç‰ˆæœ¬(è“ç‰ˆ)çš„æœåŠ¡ åˆ›å»ºæ–°ç‰ˆæœ¬çš„ReplicaSetï¼Œå°†ServiceæŒ‡å‘æ–°çš„Podsï¼Œåˆ é™¤æ—§ç‰ˆæœ¬çš„ReplicaSet
æ»šåŠ¨å‡çº§ è“ç»¿éƒ¨ç½²å¯ä»¥æœ‰æ•ˆä¿è¯ä¸šåŠ¡çš„æ­£ç¡®æ€§ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†ä¸€å®šçš„é£é™©ï¼Œä¾‹å¦‚ç¨³å®šæ€§ã€‚
å‡è®¾æ–°éƒ¨ç½²çš„åº”ç”¨æ˜¯æœ‰é—®é¢˜çš„ï¼Œä¸€æ—¦åˆ‡æ¢ä¹‹åå°±ä¼šå¯¼è‡´ä¸šåŠ¡çš„å´©æºƒï¼Œé€ æˆæŸå¤±ã€‚äºæ˜¯å°±æœ‰äº†ç¨å¾®å‹å¥½çš„å‡çº§æ–¹å¼ï¼Œæ»šåŠ¨å‡çº§ã€‚
å…ˆå…³é—­ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„å®ä¾‹ å¼€å¯ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„å®ä¾‹ç”¨äºæ›¿æ¢æ—§ç‰ˆæœ¬ æ›¿æ¢æˆåŠŸæ—¶å€™å¾ªç¯1å’Œ2ï¼Œç›´åˆ°æ‰€æœ‰çš„å®ä¾‹å‡çº§å®Œæˆã€‚ åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸­é€”å‘ç°å¼‚å¸¸å¯ä»¥åŠæ—¶åœæ‰‹ï¼ŒåŠæ—¶æ­¢æŸã€‚è€Œä¸”Kubernetesä¹Ÿåœ¨å®¢æˆ·ç«¯ä¸­æ”¯æŒäº†è¿™ä¸ªç‰¹æ€§ã€‚kubectl rolling-updateã€‚
å‡çº§å‰åRCçš„Selectoréƒ½è¢«æ”¹å˜äº† æ“ä½œéƒ½æ˜¯åœ¨å®¢æˆ·ç«¯æ‰§è¡Œçš„ï¼Ÿ é‡‘ä¸é›€å‘å¸ƒ é‡‘ä¸é›€å‘å¸ƒæ˜¯æ»šåŠ¨å‘å¸ƒçš„ä¸€ç§ç‰¹ä¾‹ï¼Œåœ¨æ»šåŠ¨å‘å¸ƒä¸­ï¼Œæ˜¯ä¸ä¼šç­‰å¾…çš„ï¼Œé™¤éä¸­é—´å‡ºé”™äº†ã€‚ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³è¦å…¨éƒ½å‡çº§ï¼Œå¯èƒ½åªæ˜¯å¤„äºPOCçš„ä¸€äº›åŸå› ï¼Œæˆ‘ä»¬åªå¸Œæœ›éƒ¨åˆ†å®ä¾‹æ˜¯æ–°çš„ï¼Œå¤§éƒ¨åˆ†æ˜¯æ—§çš„ï¼Œè€Œè¿™ç§æƒ…å½¢ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºé‡‘ä¸é›€å‘å¸ƒã€‚
å‡çº§å°‘éƒ¨åˆ†å®ä¾‹ æŸ¥çœ‹æ•ˆæœï¼Œå¦‚æœå¥½ï¼Œå…¨éƒ¨å‡çº§ å¦‚æœä¸å¥½ï¼Œåˆ™ä¸å‡çº§ å£°æ˜å¼å‡çº§ å‰é¢ä»‹ç»çš„è¿™äº›å‡çº§å‘å¸ƒæ–¹å¼åœ¨K8sä¸Šå¾ˆå¤šæ—¶å€™æ˜¯åŠæ‰‹å·¥æ–¹å¼æ‰§è¡Œçš„ï¼Œè€ŒKubernetesä½œä¸ºä¸€æ¬¾DevOPSå‹å¥½çš„ç³»ç»Ÿï¼Œå·²ç»å†…ç½®äº†å¯¹äºéƒ¨ç½²æ–¹å¼çš„ä¸€ç§èµ„æºæŠ½è±¡ï¼Œè¿™ä¸ªèµ„æºå°±æ˜¯ï¼šDeploymentã€‚
Deployment &ndash;> ReplicaSet &ndash;> Pods
Deployment å­˜åœ¨çš„æ„ä¹‰ä¸ºï¼šåœ¨å‡çº§åº”ç”¨ç¨‹åºæ—¶ï¼Œéœ€è¦å¼•å…¥é¢å¤–çš„ReplicaSetï¼Œå¹¶åè°ƒæ–°æ—§ä¸¤ä¸ªRSï¼Œä½¿ä»–ä»¬å†æ ¹æ®å½¼æ­¤ä¸æ–­ä¿®æ”¹ï¼Œè€Œä¸ä¼šé€ æˆå¹²æ‰°ã€‚Deploymentå°†è¿™äº›è¿ç»´è¿‡ç¨‹éƒ½ä»£ç åŒ–ï¼Œå†…ç½®ä¸ºè‡ªå·±çš„é€»è¾‘ï¼Œä»è€Œè®©å‡çº§å˜å¾—ç®€å•ã€‚
é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨Deploymentåˆ›å»º3ä¸ªå®ä¾‹
1# deploy.yaml 2--- 3apiVersion: apps/v1 4kind: Deployment 5metadata: 6 name: first-deployment 7 labels: 8 app: simple-pod-deployment 9spec: 10 replicas: 3 11 selector: 12 matchLabels: 13 app: simple-pod-deployment 14 template: 15 metadata: 16 name: simple-pod-deployment 17 labels: 18 app: simple-pod-deployment 19 spec: 20 containers: 21 - name: simple-pod-de 22 image: lukelau/rest-docker:0.</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/cloudnative/Kubernates/5-k8s-deployment/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/posts/cloudnative/Kubernates/6-k8s-job/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></div><div class=card-body><h5 class=card-title>K8s Job</h5><p class="card-text post-summary">Replicas å’Œdeploymentè¿™ä¸¤ç±»èµ„æºéƒ½æ˜¯ç”¨äºæ§åˆ¶workloadçš„ã€‚è¿™ä¸¤ç§ç±»å‹çš„èµ„æºä¸€èˆ¬éƒ½æ˜¯æŒç»­è¿è¡Œçš„ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€äº›è¾…åŠ©æ–¹å¼å¸®åŠ©workloadå‡ºç°å¼‚å¸¸æ—¶æ¢å¤ï¼Œä»¥åŠæ ¹æ®æƒ…å†µè¿›è¡ŒåŠ¨æ€ä¼¸ç¼©çš„ç‰¹æ€§ã€‚
Job æ ¹æ®Jobçš„å®šä¹‰åˆ›å»ºå‡ºå¯¹åº”çš„Podï¼Œç„¶åå…³æ³¨Podçš„çŠ¶æ€ï¼Œ ç›´åˆ°æ»¡è¶³å®šä¹‰ã€‚ä¾‹å¦‚Podæ‰§è¡ŒæˆåŠŸäº†æˆ–è€…æ‰§è¡Œå¤±è´¥äº†ï¼Œå¹¶ä¸”è¾¾åˆ°äº†é‡è¯•æ¬¡æ•°ã€‚
1--- 2apiVersion: batch/v1 3kind: Job 4metadata: 5 name: pi 6spec: 7 template: 8 spec: 9 containers: 10 - name: pi 11 image: perl 12 command: ["perl", "-Mbignum=bpi","-wle", "print bpi(2000)"] 13 restartPolicy: Never 14 backoffLimit: 4 Jobæ­£å¸¸æ‰§è¡Œç»“æŸåç»“æœå¦‚ä¸Šå›¾ã€‚è¿™æ˜¯ä¸€ä¸ªåªæ‰§è¡Œä¸€æ¬¡çš„Jobã€‚å®ƒçš„æ“ä½œæ–¹å¼å°±æ˜¯åˆ›å»ºä¸€ä¸ªPodï¼Œç„¶åè¿è¡Œä¸€éï¼Œç„¶åå°±é€€å‡ºã€‚å¦‚æœæƒ³æ‰§è¡Œå¤šæ¬¡ï¼Œåˆ™åªéœ€è¦å¢åŠ ä¸€ä¸ªå‚æ•°
1completions: 2 æ‰§è¡Œ2æ¬¡æ—¶åˆ›å»ºäº†ä¸¤ä¸ªPodï¼Œç„¶åä¿è¯è¿™ä¸¤ä¸ªPodéƒ½æ‰§è¡ŒæˆåŠŸã€‚
æˆ‘ä»¬åœ¨ä½¿ç”¨Deploymentç­‰Workloadçš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šæŒ‡å®šrestartPolicyï¼Œé»˜è®¤éƒ½æ˜¯RestartOnFailã€‚åœ¨Jobä¸­ä¸èƒ½è¿™ä¹ˆæŒ‡å®šï¼Œå› ä¸ºè¿™ä¸ªé€»è¾‘åº”è¯¥ç”±Jobæ¥æ§åˆ¶ï¼Œ è€Œä¸æ˜¯è®©Podæ¥æ§åˆ¶ã€‚
CronJob å®šæ—¶ä»»åŠ¡ï¼Œ CronJobå°±æ˜¯åœ¨Jobçš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†å‘¨æœŸå®šä¹‰çš„API
1--- 2apiVersion: batch/v1 3kind: CronJob 4metadata: 5 name: batch-job-pi 6spec: 7 schedule: "0,15,30,45 * * * *" 8 jobTemplate: 9 spec: 10 template: 11 metadata: 12 labels: 13 app: pi-job 14 spec: 15 containers: 16 - name: pi 17 image: perl 18 command: ["perl", "-Mbignum=bpi","-wle", "print bpi(2000)"] 19 restartPolicy: Never</p></div><div class=card-footer><span class=float-left>January 1, 0001</span>
<a href=/posts/cloudnative/Kubernates/6-k8s-job/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div></div><div class=paginator><ul class="pagination pagination-default"><li class=page-item><a href=/posts/ aria-label=First class=page-link role=button><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/posts/page/18/ aria-label=Previous class=page-link role=button><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a href=/posts/page/17/ aria-label="Page 17" class=page-link role=button>17</a></li><li class=page-item><a href=/posts/page/18/ aria-label="Page 18" class=page-link role=button>18</a></li><li class="page-item active"><a aria-current=page aria-label="Page 19" class=page-link role=button>19</a></li><li class=page-item><a href=/posts/page/20/ aria-label="Page 20" class=page-link role=button>20</a></li><li class=page-item><a href=/posts/page/21/ aria-label="Page 21" class=page-link role=button>21</a></li><li class=page-item><a href=/posts/page/20/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/posts/page/24/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://airren.github.io/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://airren.github.io/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://airren.github.io/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://airren.github.io/#achievements>My Story</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:airrenzero#gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>airrenzero#gmail.com</span></a></li><li><span><i class="fas fa-phone-alt"></i></span> <span>+86 1881733xxxx</span></li></ul></div><div class="col-md-4 col-sm-12"><p>Stay up to date with email notification</p><form action="https://github.us1.list-manage.com/subscribe/post?u=19de52a4603135aae97163fd8&amp;amp;id=094a24c76e" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate><div class=form-group><input type=email class=form-control id=mce-EMAIL name=EMAIL aria-describedby=emailHelp placeholder="Enter email">
<small id=emailHelp class="form-text text-muted">By entering your email address, you agree to receive the newsletter of this website.</small></div><button type=submit class="btn btn-info">Submit</button></form></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Â© 2020-2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script src=/js/list.js></script></body></html>